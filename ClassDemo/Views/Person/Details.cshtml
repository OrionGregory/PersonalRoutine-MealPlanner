@model Assignment3.Models.Person

@{
    ViewData["Title"] = "Your Workout Plan";
}

<h1>Your Workout Plan</h1>

<h2>Profile Details</h2>
<ul>
    <li><strong>Name:</strong> @Model.Name</li>
    <li><strong>Age:</strong> @Model.Age</li>
    <li><strong>Sex:</strong> @Model.Sex</li>
    <li><strong>Current Weight:</strong> @Model.Weight kg</li>
    <li><strong>Goal Weight:</strong> @Model.GoalWeight kg</li>
    <li><strong>Time Frame:</strong> @Model.Time weeks</li>
</ul>

<h2>Weekly Workout Routine</h2>
<table class="table table-bordered table-striped">
    <thead class="thead-dark">
        <tr>
            <th>Day</th>
            <th>Routine</th>
        </tr>
    </thead>
    <tbody>
        @{
            // Define all days of the week
            var daysOfWeek = new List<string>
        {
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
        "Sunday"
        };

            // Optionally, get the current day for highlighting
            var currentDay = DateTime.Now.DayOfWeek.ToString();
        }

        @foreach (var day in daysOfWeek)
        {
            // Find the routine for the current day
            var routine = Model.Routines.FirstOrDefault(r => string.Equals(r.DayOfWeek, day, StringComparison.OrdinalIgnoreCase));

            // Check if the current day matches today
            var isToday = string.Equals(day, currentDay, StringComparison.OrdinalIgnoreCase);

            <tr class="@(isToday ? "table-primary" : "")">
                <td>@day</td>
                <td>
                    @if (routine != null)
                    {
                        <a asp-controller="Routine" asp-action="Details" asp-route-id="@routine.Id">
                            @routine.RoutineType
                        </a>
                    }
                    else
                    {
                        <span class="text-muted">No routine available.</span>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>

<!-- Add Regenerate Workout Plan Button -->
<form asp-action="RegenerateRoutine" method="post" class="mt-3">
    @Html.AntiForgeryToken()
    <input type="hidden" name="id" value="@Model.Id" />
    <button type="submit" class="btn btn-warning">Regenerate Workout Plan</button>
</form>

<a asp-action="Edit" class="btn btn-secondary mt-3">Edit Profile</a>


